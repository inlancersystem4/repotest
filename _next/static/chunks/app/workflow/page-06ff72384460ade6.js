(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{8023:function(e,s,a){Promise.resolve().then(a.bind(a,4401))},4401:function(e,s,a){"use strict";a.r(s),a.d(s,{CampaignList:function(){return S},CampaignSkeleton:function(){return R},default:function(){return C}});var t=a(7437),l=a(2265),n=a(4987),r=a(2200),i=a(7147),c=a(7583),d=a(2421),o=a(4817),m=a(5733),u=a(4559),x=a(399),f=a(1310),p=a(1444),h=a(6370),j=a(1337),b=a(635),N=a(8309),w=a(4634),g=a(7138),y=a(1623),v=a(2151),_=a.n(v);let k=[{breadcrumbTitle:"Dashboard",breadcrumbLink:"/"},{breadcrumbTitle:"Workflows"}];function C(){let e=(0,p.v9)(e=>e.universalReducer.business),s=(0,p.I0)(),[a,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[b,w]=(0,l.useState)(!1),[y,v]=(0,l.useState)(null==e?void 0:e.wp_cr_client_id),[C,z]=(0,l.useState)(1),[L,T]=(0,l.useState)(1),[F,B]=(0,l.useState)(""),O=(0,l.useCallback)(_()(e=>{B(e)},1e3),[]),G=e=>{v(e.wp_cr_client_id),s((0,j.Mu)(e))},D=(0,l.useCallback)(async()=>{let e=new FormData;e.append("skip","all");try{let s=await (0,h.l)("credentials/credential-business-number-list",e);1===s.success&&x(s.data.credential_list)}catch(e){console.error("Failed to fetch business list:",e)}},[]),A=(0,l.useCallback)(async()=>{w(!0);let e=new FormData;e.append("client_no",y),e.append("skip",C),e.append("search",F),e.append("sort","");try{let s=await (0,h.l)("flow/flow-list",e);1===s.success?(w(!1),m(s.data.campaign_list),T(s.data.total_pages)):w(!1)}catch(e){w(!1),console.error("Failed to fetch business list:",e)}},[C,y,F]);return(0,l.useEffect)(()=>{A()},[C,y,F,A]),(0,l.useEffect)(()=>{D()},[D]),(0,t.jsx)(n.WB,{breadcrumbNav:k,children:(0,t.jsxs)("section",{className:"w-full max-w-4xl mx-auto space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between w-full gap-2",children:[(0,t.jsx)("div",{children:(0,t.jsxs)(N.h_,{children:[(0,t.jsx)(N.$F,{asChild:!0,children:(0,t.jsxs)(r.z,{variant:"outline",className:"border-successGreenLight bg-transparent text-successGreenLight",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)("p",{children:null==e?void 0:e.wp_cr_business_name})]}),u&&u.length>1&&(0,t.jsx)(d.Z,{className:"ml-6"})]})}),(0,t.jsx)(N.AW,{className:"w-56",children:u&&u.length>0?u.map((e,s)=>(0,t.jsx)(N.Xi,{onClick:()=>G(e),children:(0,t.jsx)("span",{children:null==e?void 0:e.wp_cr_business_name})},s)):null})]})}),(0,t.jsx)(r.z,{className:"bg-successGreenLight rounded-full px-5 py-1.5 text-lg",asChild:!0,children:(0,t.jsx)(g.default,{href:{pathname:"/campaign/update",query:{type:"add"}},children:"Create Flow"})})]}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg border border-infoBlue w-full  custom-box-shadow p-2 space-y-4",children:[(0,t.jsxs)("div",{className:"w-full bg-background border border-infoBlue rounded-lg overflow-hidden flex items-center gap-2",children:[(0,t.jsx)("div",{className:"min-w-8 max-w-8 flex items-center justify-center",children:(0,t.jsx)(o.Z,{size:16})}),(0,t.jsx)(i.I,{className:"w-full border-none outline-none",placeholder:"Search..",onChange:e=>{O(e.target.value)}})]}),(0,t.jsx)("div",{className:"w-full border border-infoBlue rounded-lg divide-y divide-infoBlue",children:b?(0,t.jsx)(R,{}):(0,t.jsx)(S,{list:a})})]})}),L>1&&(0,t.jsx)("div",{className:"py-2.5 px-2",children:(0,t.jsx)("div",{className:"flex items-center justify-end w-full",children:(0,t.jsx)(f.t,{currentPage:C,totalPage:L,onPageChange:e=>z(e)})})})]})})}function S(e){let{list:s}=e;return(0,t.jsxs)(y.iA,{children:[(0,t.jsx)(y.xD,{children:(0,t.jsxs)(y.SC,{className:"divide-x divide-infoBlue",children:[(0,t.jsx)(y.ss,{className:"w-[150px] font-medium text-black text-base",children:"Name"}),(0,t.jsx)(y.ss,{className:"w-[140px] font-medium text-black text-base",children:"Status"}),(0,t.jsx)(y.ss,{className:"w-[180px] font-medium text-black text-base",children:"Total entry"}),(0,t.jsx)(y.ss,{className:"w-[150px] font-medium text-black text-base",children:"Actions"})]})}),(0,t.jsx)(y.RM,{children:s&&s.length>0?s.map((e,s)=>(0,t.jsxs)(y.SC,{children:[(0,t.jsx)(y.pj,{className:"text-successGreenLight w-[150px]  py-1.5",children:e.campaign_name}),(0,t.jsx)(y.pj,{className:"w-[140px] py-1.5",children:(0,t.jsx)("p",{className:" mx-auto w-fit px-5 py-1",children:e.contact_count})}),(0,t.jsx)(y.pj,{className:"w-[150px] py-1.5",children:(0,t.jsx)("p",{className:"border border-infoBlue bg-[#EDF4FF] rounded-md w-fit px-5 py-1",children:e.campaign_status})}),(0,t.jsxs)(y.pj,{className:"w-[150px] flex gap-2.5 py-1.5",children:[(0,t.jsxs)(w.J2,{children:[(0,t.jsx)(w.xo,{asChild:!0,children:(0,t.jsx)(r.z,{variant:"ghost",size:"icon",className:"max-w-9 max-h-9",children:(0,t.jsx)(m.Z,{className:"h-5 w-5"})})}),(0,t.jsx)(w.yk,{className:"w-44 border border-solid border-infoBlue p-2 custom-box-shadow",children:(0,t.jsxs)("div",{className:"space-y-1.5 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("p",{className:"text-base",children:"Sent"}),(0,t.jsx)("p",{className:"text-successGreenLight text-base",children:e.campaign_meta_send_msg_count||"-"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("p",{className:"text-base",children:"Delivered"}),(0,t.jsx)("p",{className:"text-successGreenLight text-base",children:e.campaign_meta_delivered_msg_count||"-"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("p",{className:"text-base",children:"Read"}),(0,t.jsx)("p",{className:"text-successGreenLight text-base",children:e.campaign_meta_read_msg_count||"-"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("p",{className:"text-base",children:"replied"}),(0,t.jsx)("p",{className:"text-successGreenLight text-base",children:e.campaign_meta_replay_msg_count||"-"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("p",{className:"text-base",children:"Failed"}),(0,t.jsx)("p",{className:"text-successGreenLight text-base",children:e.campaign_meta_failed_msg_count||"-"})]})]})})]}),(0,t.jsx)(r.z,{variant:"ghost",size:"icon",className:"max-w-9 max-h-9",asChild:!0,children:(0,t.jsx)(g.default,{href:{pathname:"/templates/edit-template",query:{id:e.temp_id,token:e.temp_client}},className:"block",children:(0,t.jsx)(u.Z,{className:"h-5 w-5"})})}),(0,t.jsx)(r.z,{variant:"ghost",size:"icon",className:"max-w-9 max-h-9",children:(0,t.jsx)(x.Z,{className:"h-5 w-5"})})]})]},s)):(0,t.jsx)(y.SC,{children:(0,t.jsx)(y.pj,{colSpan:5,className:"py-4 text-center text-gray-500",children:"List not found!"})})})]})}function R(){return(0,t.jsxs)(y.iA,{children:[(0,t.jsx)(y.xD,{children:(0,t.jsxs)(y.SC,{className:"divide-x divide-infoBlue",children:[(0,t.jsx)(y.ss,{className:"font-medium text-black text-base",children:"Name"}),(0,t.jsx)(y.ss,{className:"w-[150px] font-medium text-black text-base",children:"Status"}),(0,t.jsx)(y.ss,{className:"w-[180px] font-medium text-black text-base",children:"Total entry"}),(0,t.jsx)(y.ss,{className:"w-[150px] font-medium text-black text-base",children:"Actions"})]})}),(0,t.jsx)(y.RM,{children:[...Array(10)].map((e,s)=>(0,t.jsxs)(y.SC,{children:[(0,t.jsx)(y.pj,{className:"py-1.5  h-6",children:(0,t.jsx)(b.O,{className:"h-4 w-[140px]"})}),(0,t.jsx)(y.pj,{className:"w-[150px] py-1.5  h-6",children:(0,t.jsx)(b.O,{className:"h-4 w-[60px]"})}),(0,t.jsx)(y.pj,{className:"w-[180px] py-1.5  h-6",children:(0,t.jsx)(b.O,{className:"h-4 w-[60px]"})}),(0,t.jsx)(y.pj,{className:"w-[150px] py-1.5 h-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)(b.O,{className:"h-5 w-5"}),(0,t.jsx)(b.O,{className:"h-5 w-5"}),(0,t.jsx)(b.O,{className:"h-5 w-5"})]})})]},s))})]})}},7147:function(e,s,a){"use strict";a.d(s,{I:function(){return r}});var t=a(7437),l=a(2265),n=a(8214);let r=l.forwardRef((e,s)=>{let{className:a,type:l,...r}=e;return(0,t.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});r.displayName="Input"},4634:function(e,s,a){"use strict";a.d(s,{J2:function(){return i},xo:function(){return c},yk:function(){return d}});var t=a(7437),l=a(2265),n=a(1485),r=a(8214);let i=n.fC,c=n.xz,d=l.forwardRef((e,s)=>{let{className:a,align:l="center",sideOffset:i=4,...c}=e;return(0,t.jsx)(n.h_,{children:(0,t.jsx)(n.VY,{ref:s,align:l,sideOffset:i,className:(0,r.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})})});d.displayName=n.VY.displayName},635:function(e,s,a){"use strict";a.d(s,{O:function(){return n}});var t=a(7437),l=a(8214);function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...a})}},1623:function(e,s,a){"use strict";a.d(s,{RM:function(){return c},SC:function(){return d},iA:function(){return r},pj:function(){return m},ss:function(){return o},xD:function(){return i}});var t=a(7437),l=a(2265),n=a(8214);let r=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",a),...l})})});r.displayName="Table";let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",a),...l})});i.displayName="TableHeader";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...l})});c.displayName="TableBody",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});d.displayName="TableRow";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...l})});o.displayName="TableHead";let m=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...l})});m.displayName="TableCell",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption"}},function(e){e.O(0,[864,601,698,212,971,23,744],function(){return e(e.s=8023)}),_N_E=e.O()}]);