import{L as N,D as L}from"./Default-BakE7Kt_.js";import{_ as v,b as k,f as S,r as b,o as i,d as I,w as T,a as e,y,G as x,c as r,j as n,g as h,n as C,i as A,E as F,F as p,e as w,t as m}from"./index-CObJ0xdd.js";import{f as g}from"./list-fetch-Bs_JyIgH.js";import{i as E}from"./item-delete-BEr_XWGk.js";import{C as V}from"./CommonModalLayout-BJWFpzOf.js";import{S as O}from"./SingleSelect-RiIrTQOv.js";import"./transition-DmPYughZ.js";import"./dialog-Bwww8Fqq.js";import"./admin-logo-DCOArUCp.js";import"./listbox-B5_UOFQ8.js";import"./use-text-value-C2hDVVix.js";const B="https://stagingapi.fandfrestaurants.com/admin",j={components:{CommonModalLayout:V,SingleSelect:O},props:{isOpen:Boolean,table:Object,areaArray:Array},data(){return{alertStore:k(),btnLoading:!1,seats:"",tableName:"",formName:"",tableId:"",selectAreaId:"",selectAreaName:"",formSubmitted:!1}},watch:{isOpen(){this.table&&this.table.table_id?this.formName="Edit Table - "+this.table.table_name:this.formName="Add Table"},table(t){t?this.updateSupplierData():this.clearFields()}},methods:{closeModal(){this.$emit("close_modal",1)&&(this.tableId="",this.formName="Add Table"),this.tableId="",this.$emit("close_modal"),this.clearFields()},clearFields(){this.seats="",this.tableName="",this.tableId="",this.selectAreaName="",this.selectAreaId="",this.formSubmitted=!1},updateSupplierData(){this.table?(this.tableId=this.table.table_id,this.tableName=this.table.table_name,this.seats=this.table.table_seats,this.selectAreaId=this.table.table_area_id,this.selectAreaName=this.table.table_area):this.formName="Add Table"},selectArea(t){this.selectAreaId=t.area_id},async updatedTable(){if(this.formSubmitted=!0,this.btnLoading=!0,!this.tableName||!this.seats||!this.selectAreaId){this.btnLoading=!1;return}var t=new FormData;this.tableId?t.append("table_id",this.tableId):t.append("table_id",""),t.append("table_name",this.tableName),t.append("table_seats",this.seats),t.append("table_area",this.selectAreaId);try{const a=await S.post(`${B}/table-add`,t);a.success==1?(this.tableId="",this.$emit("close_modal",1),this.clearFields(),this.btnLoading=!1):(this.btnLoading=!1,this.alertStore.error(a.message))}catch(a){this.alertStore.error(a)}}}},W={class:"space-y-3 w-full"},q={class:"space-y-1"},z={class:"input--group"},U={key:0,class:"error--message !text-left flex-1"},R={class:"grid grid-cols-2 items-start gap-3"},G={class:"space-y-1"},H={class:"input--group"},J={key:0,class:"error--message !text-left flex-1"},K={class:"space-y-1"},P={key:0,class:"error--message !text-left flex-1"},Q=["disabled"],X={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Y=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Z=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),$=[Y,Z];function ee(t,a,c,D,s,l){const _=b("SingleSelect"),f=b("CommonModalLayout");return i(),I(f,{isOpen:c.isOpen,modal_title:s.formName,onClose_modal:l.closeModal,manualClass:"max-w-xl"},{default:T(()=>[e("form",{class:"space-y-10 flex w-full flex-col items-center",onSubmit:a[2]||(a[2]=F((...d)=>l.updatedTable&&l.updatedTable(...d),["prevent"]))},[e("div",W,[e("div",q,[e("div",z,[y(e("input",{type:"text",id:"tName","onUpdate:modelValue":a[0]||(a[0]=d=>s.tableName=d),placeholder:"Name of table"},null,512),[[x,s.tableName,void 0,{trim:!0}]])]),s.formSubmitted&&!s.tableName?(i(),r("p",U," Table Name is required ")):n("",!0)]),e("div",R,[e("div",G,[e("div",H,[y(e("input",{type:"text",id:"seats","onUpdate:modelValue":a[1]||(a[1]=d=>s.seats=d),placeholder:"Seats"},null,512),[[x,s.seats,void 0,{trim:!0}]])]),s.formSubmitted&&!s.seats?(i(),r("p",J," seats is required ")):n("",!0)]),e("div",K,[h(_,{items:c.areaArray,selectLabel:"area",placeholderText:"Select Area",onReceiveData:l.selectArea,selectedValueEdit:s.selectAreaName},null,8,["items","onReceiveData","selectedValueEdit"]),s.formSubmitted&&!s.selectAreaId?(i(),r("p",P," Area is required ")):n("",!0)])])]),e("button",{class:C(["modal--form_btn",{"btn--loader":s.btnLoading}]),type:"submit",disabled:s.btnLoading},[s.btnLoading?(i(),r("svg",X,$)):n("",!0),A(" Save ")],10,Q)],32)]),_:1},8,["isOpen","modal_title","onClose_modal"])}const te=v(j,[["render",ee]]),se={components:{LayoutWrraper:N,TableForm:te,DeleteModal:L},data(){return{alertStore:k(),floorTablelist:[],deleteModal:!1,skeletonEffect:!0,tableModal:!1,itemNameforDelete:"",tableId:"",aeraList:[],tableData:""}},created(){this.fetchFloorTablesList(),this.fetchAreaList()},methods:{async fetchFloorTablesList(){this.skeletonEffect=!0;var t=new FormData;const a=await g("table-list",t);a.data&&a.data.table_list.length!==0?(this.floorTablelist=a.data.table_list,this.skeletonEffect=!1):(this.floorTablelist=[],this.skeletonEffect=!1)},async fetchAreaList(){const t=await g("area-list");t&&t.data.length!==0?this.aeraList=t.data.area_list:this.aeraList=[]},closeTableModal(t){this.tableModal=!1,this.tableData="",t&&this.fetchFloorTablesList()},toggleTableModal(){this.tableModal=!this.tableModal},closeDeleteModal(){this.deleteModal=!1,this.tableId=""},deleteItem(t,a){t&&(this.deleteModal=!0,this.tableId=t,this.itemNameforDelete=a)},async updateTable(t){var a=new FormData;a.append("table_id",t);const c=await g("table-detail",a);c.success==1&&(this.tableData=c.data,this.tableModal=!0)},async deleteArea(){if(this.tableId){var t=new FormData;t.append("table_id",this.tableId),await E("table-remove",t)?(this.fetchFloorTablesList(),this.tableId="",this.closeDeleteModal()):this.closeDeleteModal()}}}},ae={class:"custom-container"},le={class:"flex items-end justify-end w-full"},oe={class:"w-full overflow-x-auto"},ie={class:"w-full overflow-x-auto"},re={class:"table mt-6 floor-tables-table w-full"},de=e("tr",null,[e("th",{class:"table-name"},"Table Name"),e("th",{class:"seats"},"Seats"),e("th",{class:"area"},"Area"),e("th",{class:"tables-booked"},"Tables booked"),e("th",{class:"action"},"Action")],-1),ce=e("td",{class:"table-name"},[e("div",{class:"effect"},[e("span",{class:"bg-base-color h-4 w-4 mx-auto rounded-md block"})])],-1),ne=e("td",{class:"seats"},[e("div",{class:"effect"},[e("span",{class:"bg-base-color h-4 w-4 rounded-md mx-auto block"})])],-1),be=e("td",{class:"area"},[e("div",{class:"effect space-y-1 text-center"},[e("span",{class:"bg-base-color h-4 rounded-md w-full max-w-[250px] block"})])],-1),me=e("td",{class:"tables-booked"},[e("div",{class:"effect space-y-1 text-center"},[e("span",{class:"bg-base-color h-4 w-4 mx-auto rounded-md block"})])],-1),he=e("td",{class:"action"},[e("div",{class:"effect flex items-center justify-center flex-wrap gap-1.5"},[e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"})])],-1),_e=[ce,ne,be,me,he],fe={class:"table-name"},ue={class:"seats"},pe={class:"area"},ge={class:"tables-booked"},ye={class:"action"},xe=["onClick"],we=["onClick"],ve={key:2},ke=e("td",{class:"!text-center",colspan:"5"},"No data Found!!",-1),Te=[ke];function Ae(t,a,c,D,s,l){const _=b("LayoutWrraper"),f=b("TableForm"),d=b("DeleteModal");return i(),r(p,null,[h(_,null,{default:T(()=>[e("div",ae,[e("div",le,[e("button",{class:"btn--regular",onClick:a[0]||(a[0]=(...o)=>l.toggleTableModal&&l.toggleTableModal(...o))},"Add a table")]),e("div",oe,[e("div",ie,[e("table",re,[de,s.skeletonEffect?(i(),r(p,{key:0},w(10,(o,u)=>e("tr",{class:"animate-pulse",key:u},_e)),64)):(i(!0),r(p,{key:1},w(s.floorTablelist,(o,u)=>(i(),r("tr",{key:u},[e("td",fe,m(o.table_name),1),e("td",ue,m(o.table_seats),1),e("td",pe,m(o.table_area),1),e("td",ge,m(o.table_booked),1),e("td",ye,[e("button",{onClick:M=>l.updateTable(o.table_id)},"Edit",8,xe),A(", "),e("button",{onClick:M=>l.deleteItem(o.table_id,o.table_area)},"delete",8,we)])]))),128)),!s.floorTablelist||s.floorTablelist.length===0?(i(),r("tr",ve,Te)):n("",!0)])])])])]),_:1}),h(f,{isOpen:s.tableModal,onClose_modal:l.closeTableModal,table:s.tableData,areaArray:s.aeraList},null,8,["isOpen","onClose_modal","table","areaArray"]),h(d,{isDelete:s.deleteModal,item_name:s.itemNameforDelete,onClose_modal:l.closeDeleteModal,onDelete_item:l.deleteArea},null,8,["isDelete","item_name","onClose_modal","onDelete_item"])],64)}const Be=v(se,[["render",Ae]]);export{Be as default};
