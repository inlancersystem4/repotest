import{_ as k,b as I,f as y,r as u,o as r,d as P,w as _,a as e,g as h,c as d,j as p,y as g,G as f,n as D,i as c,E as F,t as M,e as N,F as E}from"./index-CObJ0xdd.js";import{f as T}from"./list-fetch-Bs_JyIgH.js";import{i as U}from"./item-delete-BEr_XWGk.js";import{I as O,d as B,_ as j,L as H}from"./dotsSixVertical-DedPFhdi.js";import{L as q,D as z}from"./Default-BakE7Kt_.js";import{M as W}from"./MultiSelect-Bmwt2rvY.js";import{C as G}from"./CommonModalLayout-BJWFpzOf.js";import{S as R,h as J}from"./transition-DmPYughZ.js";import{W as X,G as K,V as Q}from"./dialog-Bwww8Fqq.js";import{P as Y}from"./Pagination-vvzSV-Y8.js";import"./_commonjsHelpers-BosuxZz1.js";import"./admin-logo-DCOArUCp.js";import"./listbox-B5_UOFQ8.js";import"./use-text-value-C2hDVVix.js";const A="https://stagingapi.fandfrestaurants.com/admin",Z={components:{ImageUploaderVue:O,MultiSelect:W,CommonModalLayout:G},props:{isOpen:Boolean,menu:Object},data(){return{alertStore:I(),labelForImage:"Menu",eName:"",aName:"",briefE:"",briefA:"",sHours:"",menuPage:"",itemId:"",selectedImgShow:"",selectedImgSend:"",aMenuPage:"",categorieList:[],selectedCategory:[],formSubmitted:!1,category:[],btnLoading:!1}},created(){this.updateMenuData(),this.fetchCategoryList()},watch:{menu(o){o?this.updateMenuData():this.clearFields()}},methods:{closeModal(){this.$emit("close_modal")},getImageId(o){this.selectedImgSend=o},updateMenuData(){this.menu&&(this.itemId=this.menu.menu_id,this.eName=this.menu.english_name,this.aName=this.menu.arebic_name,this.briefE=this.menu.english_description,this.briefA=this.menu.arebic_description,this.sHours=this.menu.serving_hours,this.menuPage=this.menu.menu_text,this.aMenuPage=this.menu.arabic_text_menu,this.selectedImgSend=this.menu.menu_img,this.selectedImgShow=this.menu.menu_image,this.selectedCategory=this.menu.categories)},clearFields(){this.itemId="",this.eName="",this.aName="",this.briefE="",this.briefA="",this.sHours="",this.menuPage="",this.selectedImgSend="",this.selectedImgShow="",this.selectedCategory="",this.aMenuPage="",this.formSubmitted=!1},getMenuData(o){this.category=o},async fetchCategoryList(){var o=new FormData;o.append("search",""),o.append("sort","desc"),o.append("page_no","1"),o.append("isall","");try{const s=await y.post(`${A}/category-list`,o);s.data&&s.data.length!==0?this.categorieList=s.data:this.categorieList=""}catch(s){this.alertStore.error(s)}},async updateMenu(){this.formSubmitted=!0,this.btnLoading=!0;let o=[];if(this.category.length==0){var s=this.selectedCategory;typeof s=="string"&&(o=s.split(","))}else o=this.category.map(m=>m.category_id).join(",");if(!this.eName||!this.aName||!this.briefE||!this.briefA||!this.sHours||!this.menuPage||!this.aMenuPage||!this.selectedImgSend){this.btnLoading=!1;return}var a=new FormData;a.append("menu_id",this.itemId),a.append("image_id",this.selectedImgSend),a.append("english_name",this.eName),a.append("english_desc",this.briefE),a.append("arebic_name",this.aName),a.append("arebic_desc",this.briefA),a.append("serving_hours",this.sHours),a.append("text_menu",this.menuPage),a.append("arebic_text_menu",this.aMenuPage),a.append("category",o);try{const m=await y.post(`${A}/menu-add`,a);m.success==1?(this.$emit("close_modal",1),this.clearFields(),this.formSubmitted=!1,this.btnLoading=!1):(this.alertStore.error(m.message),this.btnLoading=!1)}catch(m){this.alertStore.error(m)}}}},$={class:"space-y-3 w-full"},ee={class:"space-y-1"},te={class:"input--group"},se=e("label",{for:"Image"},[c("Image"),e("span",{class:"text-red-600"},"*")],-1),oe={class:"input--group"},ae=e("label",null,null,-1),ne={key:0,class:"error--message !text-left flex-1"},ie={class:"space-y-1"},le={class:"input--group"},re=e("label",{for:"Ename"},[c("English Name"),e("span",{class:"text-red-600"},"*")],-1),ce={class:"input--group"},de=e("label",null,null,-1),ue={key:0,class:"error--message !text-left flex-1"},me={class:"space-y-1"},he={class:"input--group"},pe=e("label",{for:"briefEname"},[c("Brief in English"),e("span",{class:"text-red-600"},"*")],-1),_e={class:"input--group"},ge=e("label",null,null,-1),fe={key:0,class:"error--message !text-left flex-1"},be={class:"space-y-1"},ye={class:"input--group"},xe=e("label",{for:"Aname"},[c("Arabic name"),e("span",{class:"text-red-600"},"*")],-1),ve={class:"input--group"},Me=e("label",null,null,-1),Se={key:0,class:"error--message !text-left flex-1"},we={class:"space-y-1"},Le={class:"input--group"},Ce=e("label",{for:"briefAname"},[c("Brief in arabic"),e("span",{class:"text-red-600"},"*")],-1),De={class:"input--group"},ke=e("label",null,null,-1),Ie={key:0,class:"error--message !text-left flex-1"},Pe={class:"space-y-1"},Ne={class:"input--group"},Ee=e("label",{for:"linkCategories"},[c("Add categories"),e("span",{class:"text-red-600"},"*")],-1),Ae={class:"input--group"},Ve=e("label",null,null,-1),Fe={key:0,class:"error--message !text-left flex-1"},Te={class:"space-y-1"},Ue={class:"input--group"},Oe=e("label",{for:"Shours"},[c("Serving hours(TEXT)"),e("span",{class:"text-red-600"},"*")],-1),Be={class:"input--group"},je=e("label",null,null,-1),He={key:0,class:"error--message !text-left flex-1"},qe={class:"space-y-1"},ze={class:"input--group"},We=e("label",{for:"menuPage"},[c("Text for menu page"),e("br"),c("in English"),e("span",{class:"text-red-600"},"*")],-1),Ge={class:"input--group"},Re=e("label",null,null,-1),Je={key:0,class:"error--message !text-left flex-1"},Xe={class:"space-y-1"},Ke={class:"input--group"},Qe=e("label",{for:"aMenuPage"},[c("Text for menu page "),e("br"),c("in Arabic"),e("span",{class:"text-red-600"},"*")],-1),Ye={class:"input--group"},Ze=e("label",null,null,-1),$e={key:0,class:"error--message !text-left flex-1"},et=["disabled"],tt={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},st=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ot=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),at=[st,ot];function nt(o,s,a,m,t,i){const b=u("ImageUploaderVue"),x=u("MultiSelect"),v=u("CommonModalLayout");return r(),P(v,{isOpen:a.isOpen,modal_title:"Create a menu",onClose_modal:i.closeModal,manualClass:"menu--modal max-w-xl"},{default:_(()=>[e("form",{class:"space-y-10 flex w-full flex-col items-end",onSubmit:s[7]||(s[7]=F((...l)=>i.updateMenu&&i.updateMenu(...l),["prevent"]))},[e("div",$,[e("div",ee,[e("div",te,[se,h(b,{imageLabel:t.labelForImage,onGet_id:i.getImageId,selectedImg:t.selectedImgShow},null,8,["imageLabel","onGet_id","selectedImg"])]),e("div",oe,[ae,t.formSubmitted&&!t.selectedImgSend?(r(),d("p",ne," Image is required ")):p("",!0)])]),e("div",ie,[e("div",le,[re,g(e("input",{type:"text",id:"Ename","onUpdate:modelValue":s[0]||(s[0]=l=>t.eName=l)},null,512),[[f,t.eName,void 0,{trim:!0}]])]),e("div",ce,[de,t.formSubmitted&&!t.eName?(r(),d("p",ue," English Name is required ")):p("",!0)])]),e("div",me,[e("div",he,[pe,g(e("textarea",{id:"briefEname","onUpdate:modelValue":s[1]||(s[1]=l=>t.briefE=l)},null,512),[[f,t.briefE,void 0,{trim:!0}]])]),e("div",_e,[ge,t.formSubmitted&&!t.briefE?(r(),d("p",fe," Brief in English is required ")):p("",!0)])]),e("div",be,[e("div",ye,[xe,g(e("input",{type:"text",id:"Aname","onUpdate:modelValue":s[2]||(s[2]=l=>t.aName=l)},null,512),[[f,t.aName,void 0,{trim:!0}]])]),e("div",ve,[Me,t.formSubmitted&&!t.aName?(r(),d("p",Se," Arabic Name is required ")):p("",!0)])]),e("div",we,[e("div",Le,[Ce,g(e("textarea",{id:"briefAname","onUpdate:modelValue":s[3]||(s[3]=l=>t.briefA=l)},null,512),[[f,t.briefA,void 0,{trim:!0}]])]),e("div",De,[ke,t.formSubmitted&&!t.briefA?(r(),d("p",Ie," Brief in Arabic is required ")):p("",!0)])]),e("div",Pe,[e("div",Ne,[Ee,h(x,{id:"linkCategories",list:this.categorieList,getSelectedItem:t.selectedCategory,onCall_api:o.fatchCategorieList,onRevice_data:i.getMenuData},null,8,["list","getSelectedItem","onCall_api","onRevice_data"])]),e("div",Ae,[Ve,t.formSubmitted&&!t.category?(r(),d("p",Fe," categories is required ")):p("",!0)])]),e("div",Te,[e("div",Ue,[Oe,g(e("input",{type:"text",id:"Shours","onUpdate:modelValue":s[4]||(s[4]=l=>t.sHours=l)},null,512),[[f,t.sHours,void 0,{trim:!0}]])]),e("div",Be,[je,t.formSubmitted&&!t.sHours?(r(),d("p",He," Serving Hours is required ")):p("",!0)])]),e("div",qe,[e("div",ze,[We,g(e("input",{type:"text",id:"menuPage","onUpdate:modelValue":s[5]||(s[5]=l=>t.menuPage=l)},null,512),[[f,t.menuPage,void 0,{trim:!0}]])]),e("div",Ge,[Re,t.formSubmitted&&!t.menuPage?(r(),d("p",Je," Text for menu page in English is required ")):p("",!0)])]),e("div",Xe,[e("div",Ke,[Qe,g(e("input",{type:"text",id:"aMenuPage","onUpdate:modelValue":s[6]||(s[6]=l=>t.aMenuPage=l)},null,512),[[f,t.aMenuPage,void 0,{trim:!0}]])]),e("div",Ye,[Ze,t.formSubmitted&&!t.aMenuPage?(r(),d("p",$e," Text for menu page in Arabic is required ")):p("",!0)])])]),e("button",{class:D(["modal--form_btn",{"btn--loader":t.btnLoading}]),type:"submit",disabled:t.btnLoading},[t.btnLoading?(r(),d("svg",tt,at)):p("",!0),c(" Save ")],10,et)],32)]),_:1},8,["isOpen","onClose_modal"])}const it=k(Z,[["render",nt]]),lt="https://stagingapi.fandfrestaurants.com/admin",rt="https://stagingapi.fandfrestaurants.com/api",ct={components:{TransitionRoot:R,TransitionChild:J,Dialog:X,DialogPanel:K,DialogTitle:Q,draggable:B},props:{isOpen:Boolean},data(){return{alertStore:I(),menuList:[]}},created(){this.fatchMenuList()},methods:{closeModal(){this.$emit("close_modal")},async fatchMenuList(){var o=new FormData;o.append("type","");try{const s=await y.post(`${rt}/menu-list`,o);s.data&&s.data.length!==0?this.menuList=s.data:this.menuList=""}catch(s){this.alertStore.error(s)}},async handleDragJson(){const o=[];this.menuList.forEach((m,t)=>{o.push({[m.menu_id]:t.toString()})});const s=JSON.stringify(o);var a=new FormData;a.append("order_json",s),a.append("label","menu");try{(await y.post(`${lt}/order-update`,a)).success==1&&this.fatchMenuList()}catch(m){this.alertStore.error(m)}}}},dt=e("div",{class:"fixed inset-0 bg-black/25"},null,-1),ut={class:"fixed inset-0 overflow-y-auto"},mt={class:"flex min-h-full items-center justify-center p-4 text-center"},ht={class:"w-full border cursor-grabbing border-base-color rounded-md p-2 flex items-center justify-between"},pt={class:"flex items-center gap-3.5"},_t=["src","alt"],gt={class:"space-y-1"},ft={class:"text-base text-base-color font-helveticav"},bt={class:"font-helveticav text-sm"},yt=e("button",{class:"w-12 h-12 flex items-center justify-center bg-transparent"},[e("img",{src:j})],-1);function xt(o,s,a,m,t,i){const b=u("TransitionChild"),x=u("DialogTitle"),v=u("draggable"),l=u("DialogPanel"),S=u("Dialog"),w=u("TransitionRoot");return r(),P(w,{appear:"",show:a.isOpen,as:"template"},{default:_(()=>[h(S,{as:"div",onClose:i.closeModal,class:"relative z-10"},{default:_(()=>[h(b,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:_(()=>[dt]),_:1}),e("div",ut,[e("div",mt,[h(b,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:_(()=>[h(l,{class:"w-full max-w-xl transform overflow-hidden menu--modal rounded-md bg-white py-10 px-8 text-left align-middle shadow-md border border-solid border-base-color transition-all"},{default:_(()=>[h(x,{as:"h6",class:"modal--title !mb-8"},{default:_(()=>[c(" Sorting a menu ")]),_:1}),h(v,{modelValue:t.menuList,"onUpdate:modelValue":s[0]||(s[0]=n=>t.menuList=n),tag:"ul",onEnd:i.handleDragJson,class:"grid grid-cols-1 gap-2.5"},{item:_(({element:n})=>[e("li",ht,[e("div",pt,[e("img",{src:n.menu_image,alt:n.english_name,loading:"lazy",class:"w-24 h-24 object-fit"},null,8,_t),e("div",gt,[e("h6",ft,M(n.english_name),1),e("p",bt,M(n.arebic_name),1)])]),yt])]),_:1},8,["modelValue","onEnd"])]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])}const vt=k(ct,[["render",xt]]),V="https://stagingapi.fandfrestaurants.com/admin",Mt={components:{LayoutWrraper:q,Layout:H,MenuFormVue:it,DeleteModal:z,SortIngVue:vt,Pagination:Y},data(){return{modal:!1,alertStore:I(),listApiName:"menu-list",menuList:[],sort:"desc",deleteModal:!1,menuId:"",itemNameforDelete:"",menuData:"",skeletonEffect:!0,sortingModal:!1,currentPage:1,totalPages:1,deleteApiName:"menu-delete"}},created(){this.fetchMenuList()},methods:{openModal(){this.modal=!0,this.menuData=""},closeModal(o){this.modal=!1,o&&this.fetchMenuList()},chnageSort(){this.sortingModal=!0},closeSortModal(){this.sortingModal=!1,this.fetchMenuList()},updatePage(o){this.currentPage=o,this.fetchMenuList()},async fetchMenuList(){this.skeletonEffect=!0;var o=new FormData;o.append("search",""),o.append("sort",this.sort),o.append("page_no",this.currentPage);const s=await T(this.listApiName,o);s&&s.data.length!==0?(this.menuList=s.data,this.skeletonEffect=!1,this.totalPages=s.total_pages):(this.menuList="",this.skeletonEffect=!1)},async updateCategorie(o){var s=new FormData;s.append("menu_id",o);try{const a=await y.post(`${V}/menu-details`,s);a.success==1&&(this.menuData=a.category,this.modal=!0)}catch(a){this.alertStore.error(a)}},deleteItem(o,s){o&&(this.deleteModal=!0,this.menuId=o,this.itemNameforDelete=s)},closeDeleteModal(){this.deleteModal=!1,this.menuId=""},async deleteMenu(){if(this.menuId){var o=new FormData;o.append("menu_id",this.menuId),await U(this.deleteApiName,o)?(this.fetchMenuList(),this.menuId="",this.closeDeleteModal()):this.closeDeleteModal()}},async updateStatus(o){if(o){var s=new FormData;s.append("menu_id",o);try{(await y.post(`${V}/menu-status`,s)).success==1&&this.fetchMenuList()}catch(a){this.alertStore.error(a)}}}}},St={class:"flex items-stretch gap-3.5"},wt={class:"table mt-6 menu-table"},Lt=e("tr",null,[e("th",{class:"image"},"Image"),e("th",{class:"eName"},"English"),e("th",{class:"aName"},"Arabic"),e("th",{class:"action"},"Actions")],-1),Ct=e("td",{class:"image"},[e("div",{class:"effect"},[e("span",{class:"bg-base-color h-[100px] rounded-md w-[100px] block"})])],-1),Dt=e("td",{class:"eName"},[e("div",{class:"effect"},[e("span",{class:"bg-base-color h-4 rounded-md w-[180px] block"})])],-1),kt=e("td",{class:"aName"},[e("div",{class:"effect space-y-1 text-center"},[e("span",{class:"bg-base-color h-4 rounded-md w-[180px] block"})])],-1),It=e("td",{class:"action"},[e("div",{class:"effect flex items-center justify-center flex-wrap gap-1.5"},[e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"})])],-1),Pt=[Ct,Dt,kt,It],Nt={class:"image"},Et=["src","alt"],At={class:"eName"},Vt={class:"aName"},Ft={class:"action"},Tt=["onClick"],Ut=["onClick"],Ot=["onClick"],Bt=["onClick"],jt={key:0,class:"my-12 text-center"},Ht=e("p",{class:"text-lg text-base-color"},"No Data Available",-1),qt=[Ht],zt={key:1,class:"flex items-center justify-center w-full mt-8"};function Wt(o,s,a,m,t,i){const b=u("Pagination"),x=u("MenuFormVue"),v=u("SortIngVue"),l=u("DeleteModal"),S=u("Layout"),w=u("LayoutWrraper");return r(),P(w,null,{default:_(()=>[h(S,null,{tabMenu:_(()=>[e("ul",St,[e("li",null,[e("button",{class:"menu--btn",onClick:s[0]||(s[0]=(...n)=>i.chnageSort&&i.chnageSort(...n))},"Sort")]),e("li",null,[e("button",{class:"menu--btn",onClick:s[1]||(s[1]=(...n)=>i.openModal&&i.openModal(...n))},"Add")])])]),default:_(()=>[e("table",wt,[Lt,t.skeletonEffect?(r(),d(E,{key:0},N(10,(n,L)=>e("tr",{class:"animate-pulse",key:L},Pt)),64)):(r(!0),d(E,{key:1},N(t.menuList,(n,L)=>(r(),d("tr",{key:L,class:D({"opacity-50":n.menu_status==0})},[e("td",Nt,[e("img",{loading:"lazy",src:n.menu_image,alt:n.english_name,class:D({grayscale:n.menu_status==0})},null,10,Et)]),e("td",At,M(n.english_name),1),e("td",Vt,M(n.arebic_name),1),e("td",Ft,[e("button",{onClick:C=>i.updateCategorie(n.menu_id)},"Edit",8,Tt),c(", "),e("button",{onClick:C=>i.deleteItem(n.menu_id,n.english_name)},"delete",8,Ut),c(", "),e("button",{onClick:C=>i.updateStatus(n.menu_id)},"show",8,Ot),c(" or "),e("button",{onClick:C=>i.updateStatus(n.menu_id)},"hide",8,Bt)])],2))),128))]),!t.menuList||t.menuList.length<0||t.menuList.length==0?(r(),d("div",jt,qt)):p("",!0),t.menuList&&t.menuList.length!==0?(r(),d("div",zt,[h(b,{currentPage:t.currentPage,totalPages:t.totalPages,onUpdate_page:i.updatePage},null,8,["currentPage","totalPages","onUpdate_page"])])):p("",!0),h(x,{isOpen:t.modal,onClose_modal:i.closeModal,menu:t.menuData},null,8,["isOpen","onClose_modal","menu"]),h(v,{isOpen:t.sortingModal,onClose_modal:i.closeSortModal},null,8,["isOpen","onClose_modal"]),h(l,{isDelete:t.deleteModal,item_name:t.itemNameforDelete,onClose_modal:i.closeDeleteModal,onDelete_item:i.deleteMenu},null,8,["isDelete","item_name","onClose_modal","onDelete_item"])]),_:1})]),_:1})}const ns=k(Mt,[["render",Wt]]);export{ns as default};
