import{L as f}from"./Default-BakE7Kt_.js";import{_ as v,f as y,r as u,o as a,d as S,w as b,a as e,g as k,c as d,j as _,e as x,F as L,n as T,i as A,E as C,t as F,B as I,C as V}from"./index-CObJ0xdd.js";import{f as p}from"./list-fetch-Bs_JyIgH.js";import{S as B}from"./SingleSelect-RiIrTQOv.js";import"./transition-DmPYughZ.js";import"./dialog-Bwww8Fqq.js";import"./admin-logo-DCOArUCp.js";import"./listbox-B5_UOFQ8.js";import"./use-text-value-C2hDVVix.js";const W="https://stagingapi.fandfrestaurants.com/admin",D={components:{LayoutWrraper:f,SingleSelect:B},data(){return{btnLoading:!1,formSubmitted:!1,workingArray:[],serviceList:[],selectedService:"",selectedServiceId:""}},created(){this.fetchServiceList()},methods:{async fetchServiceList(){const t=await p("service-list");t&&t.data.length!==0&&(this.serviceList=t.data)},async selectService(t){t&&(this.selectedServiceId=t.service_id);var s=new FormData;s.append("working_hours_service_id",this.selectedServiceId);const r=await p("working-hours-detail",s);r.data&&r.data.working_hours.length!==0?this.workingArray=r.data.working_hours:this.workingArray=[]},handleFromTime(t,s){const r=t.target.value,[m,i]=r.split(":"),o=`${m}:${i}:00`;this.workingArray[s].wh_from_time=o},handleToTime(t,s){const r=t.target.value,[m,i]=r.split(":"),o=`${m}:${i}:00`;this.workingArray[s].wh_to_time=o},setSimilarTime(){const t=this.workingArray[0].wh_from_time,s=this.workingArray[0].wh_to_time;this.workingArray.forEach(r=>{r.wh_from_time=t,r.wh_to_time=s})},async updatedTiming(){if(this.formSubmitted=!0,this.btnLoading=!0,!this.selectedServiceId||!this.workingArray){this.btnLoading=!1;return}var t=new FormData;t.append("wh_service_id",this.selectedServiceId),t.append("wh_service_updated_list",JSON.stringify(this.workingArray));try{const s=await y.post(`${W}/Working-hour-edit`,t);s.success==1?(this.btnLoading=!1,this.selectService()):(this.btnLoading=!1,this.alertStore.error(s.message))}catch(s){this.alertStore.error(s)}}}},n=t=>(I("data-v-2bc79e55"),t=t(),V(),t),E=n(()=>e("h2",{class:"modal--title"},"Working hours",-1)),M={class:"w-full flex flex-col items-end space-y-6"},N={class:"w-full"},z={class:"space-y-2.5"},R={class:"space-y-1.5"},j={class:"w-full flex items-center gap-2.5"},q=n(()=>e("p",{class:"label"},"select service",-1)),H={class:"w-full flex items-center gap-2.5"},J=n(()=>e("p",{class:"label"},null,-1)),O={key:0,class:"error--message !text-left flex-1"},U={class:"label"},Y={class:"w-full grid grid-cols-2 gap-2 max-w-[330px]"},G={class:"input--group"},K=["value","onChange"],P={class:"input--group"},Q=["value","onChange"],X=n(()=>e("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 1216.000000 1280.000000",preserveAspectRatio:"xMidYMid meet"},[e("g",{transform:"translate(0.000000,1280.000000) scale(0.100000,-0.100000)",fill:"#FFFFFF",stroke:"none"},[e("path",{d:`M3470 9600 l0 -3200 -1731 0 c-952 0 -1729 -4 -1727 -8 4 -12 6062
                               -6390 6068 -6390 6 0 6064 6378 6068 6390 2 4 -775 8 -1727 8 l-1731 0 0 3200
                               0 3200 -2610 0 -2610 0 0 -3200z`})])],-1)),Z=[X],$=["disabled"],ee={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},te=n(()=>e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),se=n(()=>e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)),ie=[te,se];function re(t,s,r,m,i,o){const g=u("SingleSelect"),w=u("LayoutWrraper");return a(),S(w,null,{default:b(()=>[e("form",{class:"max-w-lg mx-auto space-y-10 py-3",onSubmit:s[1]||(s[1]=C((...c)=>o.updatedTiming&&o.updatedTiming(...c),["prevent"]))},[E,e("div",M,[e("div",N,[e("ul",z,[e("li",R,[e("div",j,[q,k(g,{items:i.serviceList,selectLabel:"service",placeholderText:"Select Service",onReceiveData:o.selectService,selectedValueEdit:i.selectedService},null,8,["items","onReceiveData","selectedValueEdit"])]),e("div",H,[J,i.formSubmitted&&!i.selectedServiceId?(a(),d("p",O," Service is required ")):_("",!0)])]),(a(!0),d(L,null,x(i.workingArray,(c,h)=>(a(),d("li",{class:"w-full flex items-center gap-2.5",key:h},[e("p",U,F(c.wh_week_day),1),e("div",Y,[e("div",G,[e("input",{type:"time",class:"input-group",value:c.wh_from_time,onChange:l=>o.handleFromTime(l,h)},null,40,K)]),e("div",P,[e("input",{type:"time",class:"input-group",value:c.wh_to_time,onChange:l=>o.handleToTime(l,h)},null,40,Q)])]),h==0?(a(),d("button",{key:0,onClick:s[0]||(s[0]=(...l)=>o.setSimilarTime&&o.setSimilarTime(...l)),type:"button",class:"rounded-md bg-base-color min-w-10 max-w-10 flex items-center justify-center min-h-10 max-h-10"},Z)):_("",!0)]))),128))])]),e("button",{class:T(["modal--form_btn",{"btn--loader":i.btnLoading}]),type:"submit",disabled:i.btnLoading},[i.btnLoading?(a(),d("svg",ee,ie)):_("",!0),A(" Save ")],10,$)])],32)]),_:1})}const ue=v(D,[["render",re],["__scopeId","data-v-2bc79e55"]]);export{ue as default};
