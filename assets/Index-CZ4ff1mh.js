import{_ as P,b as F,f,r as l,o as n,d as w,w as g,a as e,g as h,c,j as p,y as k,G as M,n as C,i as _,E,F as N,e as A,t as u}from"./index-CObJ0xdd.js";import{f as $}from"./list-fetch-Bs_JyIgH.js";import{i as O}from"./item-delete-BEr_XWGk.js";import{I as U,d as T,_ as j,L as B}from"./dotsSixVertical-DedPFhdi.js";import{L as J,D as W}from"./Default-BakE7Kt_.js";import{C as z}from"./CommonModalLayout-BJWFpzOf.js";import{S as G,h as q}from"./transition-DmPYughZ.js";import{W as R,G as H,V as K}from"./dialog-Bwww8Fqq.js";import{P as Q}from"./Pagination-vvzSV-Y8.js";import"./_commonjsHelpers-BosuxZz1.js";import"./admin-logo-DCOArUCp.js";const X="https://stagingapi.fandfrestaurants.com/admin",Y={components:{ImageUploaderVue:U,CommonModalLayout:z},props:{isOpen:Boolean,category:Object},data(){return{alertStore:F(),eName:"",aName:"",description:"",selectedImgSend:"",itemId:"",labelForImage:"Category",selectedImgShow:"",formSubmitted:!1,btnLoading:!1}},created(){this.updateCategorieData()},watch:{category(o){o?this.updateCategorieData():this.clearFields()}},methods:{closeModal(){this.$emit("close_modal")},getImageId(o){this.selectedImgSend=o},updateCategorieData(){this.category&&(this.eName=this.category.english_name,this.aName=this.category.arebic_name,this.description=this.category.category_description,this.itemId=this.category.category_id,this.selectedImgSend=this.category.category_img,this.selectedImgShow=this.category.category_image)},clearFields(){this.eName="",this.aName="",this.description="",this.selectedImgSend="",this.selectedImgShow="",this.itemId="",this.formSubmitted=!1},async updateCategories(){if(this.formSubmitted=!0,this.btnLoading=!0,!this.eName||!this.aName||!this.description||!this.selectedImgSend){this.btnLoading=!1;return}var o=new FormData;o.append("category_id",this.itemId),o.append("category_name",this.eName),o.append("category_arebic",this.aName),o.append("category_desc",this.description),o.append("category_image",this.selectedImgSend);try{const t=await f.post(`${X}/category-add`,o);t.success==1?(this.$emit("close_modal",1),this.clearFields(),this.btnLoading=!1):(this.btnLoading=!1,this.alertStore.error(t.message))}catch(t){this.alertStore.error(t)}}}},Z={class:"space-y-3 w-full"},ee={class:"space-y-1"},te={class:"input--group"},se=e("label",{for:"Image"},[_("Image"),e("span",{class:"text-red-600"},"*")],-1),oe={class:"input--group"},ae=e("label",null,null,-1),ie={key:0,class:"error--message !text-left flex-1"},re={class:"space-y-1"},ne={class:"input--group"},le=e("label",{for:"Ename"},[_("English Name"),e("span",{class:"text-red-600"},"*")],-1),ce={class:"input--group"},de=e("label",null,null,-1),me={key:0,class:"error--message !text-left flex-1"},ge={class:"space-y-1"},he={class:"input--group"},pe=e("label",{for:"Aname"},[_("Arabic name"),e("span",{class:"text-red-600"},"*")],-1),_e={class:"input--group"},ue=e("label",null,null,-1),fe={key:0,class:"error--message !text-left flex-1"},ye={class:"space-y-1"},be={class:"input--group"},ve=e("label",{for:"description"},[_("Description"),e("span",{class:"text-red-600"},"*")],-1),xe={class:"input--group"},we=e("label",null,null,-1),Ce={key:0,class:"error--message !text-left flex-1"},Le=["disabled"],Se={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},De=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ke=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Me=[De,ke];function Ie(o,t,i,d,s,r){const y=l("ImageUploaderVue"),b=l("CommonModalLayout");return n(),w(b,{isOpen:i.isOpen,modal_title:"Create a Category",onClose_modal:r.closeModal,manualClass:"category--modal max-w-xl"},{default:g(()=>[e("form",{class:"space-y-10 flex w-full flex-col items-end",onSubmit:t[3]||(t[3]=E((...m)=>r.updateCategories&&r.updateCategories(...m),["prevent"]))},[e("div",Z,[e("div",ee,[e("div",te,[se,h(y,{imageLabel:s.labelForImage,onGet_id:r.getImageId,selectedImg:s.selectedImgShow},null,8,["imageLabel","onGet_id","selectedImg"])]),e("div",oe,[ae,s.formSubmitted&&!s.selectedImgSend?(n(),c("p",ie," Image is required ")):p("",!0)])]),e("div",re,[e("div",ne,[le,k(e("input",{type:"text",id:"Ename","onUpdate:modelValue":t[0]||(t[0]=m=>s.eName=m)},null,512),[[M,s.eName,void 0,{trim:!0}]])]),e("div",ce,[de,s.formSubmitted&&!s.eName?(n(),c("p",me," English Name is required ")):p("",!0)])]),e("div",ge,[e("div",he,[pe,k(e("input",{type:"text",id:"Aname","onUpdate:modelValue":t[1]||(t[1]=m=>s.aName=m)},null,512),[[M,s.aName,void 0,{trim:!0}]])]),e("div",_e,[ue,s.formSubmitted&&!s.aName?(n(),c("p",fe," Arabic Name is required ")):p("",!0)])]),e("div",ye,[e("div",be,[ve,k(e("input",{type:"text",id:"description","onUpdate:modelValue":t[2]||(t[2]=m=>s.description=m)},null,512),[[M,s.description,void 0,{trim:!0}]])]),e("div",xe,[we,s.formSubmitted&&!s.description?(n(),c("p",Ce," Description is required ")):p("",!0)])])]),e("button",{class:C(["modal--form_btn",{"btn--loader":s.btnLoading}]),type:"submit",disabled:s.btnLoading},[s.btnLoading?(n(),c("svg",Se,Me)):p("",!0),_(" Save ")],10,Le)],32)]),_:1},8,["isOpen","onClose_modal"])}const Ne=P(Y,[["render",Ie]]),Ae="https://stagingapi.fandfrestaurants.com/admin",V="https://stagingapi.fandfrestaurants.com/api",Pe={components:{TransitionRoot:G,TransitionChild:q,Dialog:R,DialogPanel:H,DialogTitle:K,draggable:T},props:{isOpen:Boolean},data(){return{alertStore:F(),selectedMenuActive:"",menuList:[],categoryList:[]}},created(){this.fatchMenuList()},methods:{closeModal(){this.$emit("close_modal")},async fatchMenuList(){var o=new FormData;o.append("type","");try{const t=await f.post(`${V}/menu-list`,o);t.data&&t.data.length!==0?this.menuList=t.data:this.menuList=""}catch(t){this.alertStore.error(t)}},async selectedMenu(o){this.selectedMenuActive=o;var t=new FormData;t.append("menu",this.selectedMenuActive),t.append("type","");try{const i=await f.post(`${V}/category-list`,t);i.data&&i.data.length!==0?this.categoryList=i.data:this.categoryList=""}catch(i){this.alertStore.error(i)}},async handleDragJson(){const o=[];this.categoryList.forEach((d,s)=>{o.push({[d.category_id]:s.toString()})});const t=JSON.stringify(o);var i=new FormData;i.append("order_json",t),i.append("label","category");try{(await f.post(`${Ae}/order-update`,i)).success==1&&this.selectedMenuActive}catch(d){this.alertStore.error(d)}}}},Fe=e("div",{class:"fixed inset-0 bg-black/25"},null,-1),Ve={class:"fixed inset-0 overflow-y-auto"},Ee={class:"flex min-h-full items-center justify-center p-4 text-center"},$e={key:0,class:"space-y-2"},Oe=e("h6",{class:"modal--title !text-2xl !mt-8 !mb-0"},"select Menu",-1),Ue={class:"grid grid-cols-2 gap-2.5"},Te=["onClick"],je={class:"flex items-center gap-3.5"},Be={class:"space-y-1"},Je={class:"text-base text-base-color font-helveticav"},We={class:"font-helveticav text-sm"},ze={class:"w-full border cursor-grabbing border-base-color rounded-md p-2 flex items-center justify-between"},Ge={class:"flex items-center gap-3.5"},qe=["src","alt"],Re={class:"space-y-1"},He={class:"text-base text-base-color font-helveticav"},Ke={class:"font-helveticav text-sm"},Qe=e("button",{class:"w-12 h-12 flex items-center justify-center bg-transparent"},[e("img",{src:j})],-1);function Xe(o,t,i,d,s,r){const y=l("TransitionChild"),b=l("DialogTitle"),m=l("draggable"),L=l("DialogPanel"),S=l("Dialog"),D=l("TransitionRoot");return n(),w(D,{appear:"",show:i.isOpen,as:"template"},{default:g(()=>[h(S,{as:"div",onClose:r.closeModal,class:"relative z-10"},{default:g(()=>[h(y,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:g(()=>[Fe]),_:1}),e("div",Ve,[e("div",Ee,[h(y,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:g(()=>[h(L,{class:"w-full max-w-xl transform overflow-hidden menu--modal rounded-md bg-white py-10 px-8 text-left align-middle shadow-md border border-solid border-base-color transition-all"},{default:g(()=>[h(b,{as:"h6",class:"modal--title !mb-8"},{default:g(()=>[_(" Sorting a categories ")]),_:1}),s.menuList&&s.menuList.length!==0?(n(),c("div",$e,[Oe,e("ul",Ue,[(n(!0),c(N,null,A(s.menuList,(a,v)=>(n(),c("li",{class:"w-full border border-base-color rounded-md p-2 cursor-pointer",key:v,onClick:x=>r.selectedMenu(a.menu_id)},[e("div",je,[e("div",{class:C(["min-w-4 min-h-4 max-w-4 max-h-4 rounded-full border border-solid border-base-color",{"bg-base-color":a.menu_id==s.selectedMenuActive}])},null,2),e("div",Be,[e("h6",Je,u(a.english_name),1),e("p",We,u(a.arebic_name),1)])])],8,Te))),128))])])):p("",!0),s.selectedMenuActive?(n(),w(m,{key:1,modelValue:s.categoryList,"onUpdate:modelValue":t[0]||(t[0]=a=>s.categoryList=a),tag:"ul",onEnd:r.handleDragJson,class:"grid grid-cols-1 gap-2.5 mt-4"},{item:g(({element:a})=>[e("li",ze,[e("div",Ge,[e("img",{src:a.category_image,alt:a.english_name,class:"w-20 h-20 object-contain"},null,8,qe),e("div",Re,[e("h6",He,u(a.english_name),1),e("p",Ke,u(a.arebic_name),1)])]),Qe])]),_:1},8,["modelValue","onEnd"])):p("",!0)]),_:1})]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])}const Ye=P(Pe,[["render",Xe]]),I="https://stagingapi.fandfrestaurants.com/admin",Ze={components:{LayoutWrraper:J,Layout:B,CategoriesForm:Ne,DeleteModal:W,SortIngVue:Ye,Pagination:Q},data(){return{modal:!1,alertStore:F(),listApiName:"category-list",deleteApiName:"category-delete",categoryList:[],sort:"desc",deleteModal:!1,categoryId:"",itemNameforDelete:"",categoryData:"",skeletonEffect:!0,sortingModal:!1,currentPage:1,totalPages:1}},created(){this.fetchCategorieList()},methods:{openModal(){this.modal=!0,this.categoryData=""},closeModal(o){this.modal=!1,o&&this.fetchCategorieList()},chnageSort(){this.sortingModal=!0},updatePage(o){this.currentPage=o,this.fetchCategorieList()},closeSortModal(){this.sortingModal=!1,this.fetchCategorieList()},async fetchCategorieList(){this.skeletonEffect=!0;var o=new FormData;o.append("search",""),o.append("sort",this.sort),o.append("page_no",this.currentPage);const t=await $(this.listApiName,o);t&&t.data.length!==0?(this.categoryList=t.data,this.skeletonEffect=!1,this.totalPages=t.total_pages):(this.categoryList=[],this.skeletonEffect=!1)},async updateCategorie(o){var t=new FormData;t.append("category_id",o);try{const i=await f.post(`${I}/category-details`,t);i.success==1&&(this.categoryData=i.category,this.modal=!0)}catch(i){this.alertStore.error(i)}},deleteItem(o,t){o&&(this.deleteModal=!0,this.categoryId=o,this.itemNameforDelete=t)},closeDeleteModal(){this.deleteModal=!1,this.categoryId=""},async deleteCategorie(){if(this.categoryId){var o=new FormData;o.append("category_id",this.categoryId),await O(this.deleteApiName,o)?(this.fetchCategorieList(),this.categoryId="",this.closeDeleteModal()):this.closeDeleteModal()}},async updateStatus(o){if(o){var t=new FormData;t.append("category_id",o);try{(await f.post(`${I}/category-status`,t)).success==1&&this.fetchCategorieList()}catch(i){this.alertStore.error(i)}}},async handleDragJson(){const o=[];this.list.forEach((d,s)=>{o.push({[d.category_id]:s.toString()})});const t=JSON.stringify(o);var i=new FormData;i.append("order_json",t),i.append("label","category");try{(await f.post(`${I}/order-update`,i)).success==1&&this.fetchCategorieList()}catch(d){this.alertStore.error(d)}}}},et={class:"flex items-stretch gap-3.5"},tt={class:"table mt-6 categories-table"},st=e("tr",null,[e("th",{class:"image"},"Image"),e("th",{class:"eName"},"English"),e("th",{class:"aName"},"Arabic"),e("th",{class:"description"},"Description"),e("th",{class:"action"},"Actions")],-1),ot=e("td",{class:"image"},[e("div",{class:"effect"},[e("span",{class:"bg-base-color h-[100px] rounded-md w-[100px] block"})])],-1),at=e("td",{class:"eName"},[e("div",{class:"effect"},[e("span",{class:"bg-base-color h-4 rounded-md w-[180px] block"})])],-1),it=e("td",{class:"aName"},[e("div",{class:"effect space-y-1 text-center"},[e("span",{class:"bg-base-color h-4 rounded-md w-[180px] block"})])],-1),rt=e("td",{class:"description"},[e("div",{class:"effect space-y-1 text-center"},[e("span",{class:"bg-base-color h-4 rounded-md w-full block"}),e("span",{class:"bg-base-color h-4 mx-auto rounded-md w-[72px] block"})])],-1),nt=e("td",{class:"action"},[e("div",{class:"effect flex items-center justify-center flex-wrap gap-1.5"},[e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-4 rounded-md w-[42px] block"})])],-1),lt=[ot,at,it,rt,nt],ct={class:"image"},dt=["src","alt"],mt={class:"eName"},gt={class:"aName"},ht={class:"description"},pt={class:"action"},_t=["onClick"],ut=["onClick"],ft=["onClick"],yt=["onClick"],bt={key:0,class:"my-12 text-center"},vt=e("p",{class:"text-lg text-base-color"},"No Data Available",-1),xt=[vt],wt={key:1,class:"flex items-center justify-center w-full mt-8"};function Ct(o,t,i,d,s,r){const y=l("Pagination"),b=l("CategoriesForm"),m=l("DeleteModal"),L=l("SortIngVue"),S=l("Layout"),D=l("LayoutWrraper");return n(),w(D,null,{default:g(()=>[h(S,null,{tabMenu:g(()=>[e("ul",et,[e("li",null,[e("button",{class:"menu--btn",onClick:t[0]||(t[0]=(...a)=>r.chnageSort&&r.chnageSort(...a))},"Sort")]),e("li",null,[e("button",{class:"menu--btn",onClick:t[1]||(t[1]=(...a)=>r.openModal&&r.openModal(...a))},"Add")])])]),default:g(()=>[e("table",tt,[st,s.skeletonEffect?(n(),c(N,{key:0},A(10,(a,v)=>e("tr",{class:"animate-pulse",key:v},lt)),64)):p("",!0),(n(!0),c(N,null,A(s.categoryList,(a,v)=>(n(),c("tr",{key:v,class:C({"opacity-50":a.category_status==0})},[e("td",ct,[e("img",{loading:"lazy",src:a.category_image,alt:a.english_name,class:C({grayscale:a.category_status==0})},null,10,dt)]),e("td",mt,u(a.english_name),1),e("td",gt,u(a.arebic_name),1),e("td",ht,u(a.category_description),1),e("td",pt,[e("button",{onClick:x=>r.updateCategorie(a.category_id)},"Edit",8,_t),_(", "),e("button",{onClick:x=>r.deleteItem(a.category_id,a.english_name)},"delete",8,ut),_(", "),e("button",{onClick:x=>r.updateStatus(a.category_id)},"show",8,ft),_(" or "),e("button",{onClick:x=>r.updateStatus(a.category_id)},"hide",8,yt)])],2))),128))]),!s.categoryList||s.categoryList.length<0||s.categoryList.length==0?(n(),c("div",bt,xt)):p("",!0),s.categoryList&&s.categoryList.length!==0?(n(),c("div",wt,[h(y,{currentPage:s.currentPage,totalPages:s.totalPages,onUpdate_page:r.updatePage},null,8,["currentPage","totalPages","onUpdate_page"])])):p("",!0),h(b,{isOpen:s.modal,onClose_modal:r.closeModal,category:s.categoryData},null,8,["isOpen","onClose_modal","category"]),h(m,{isDelete:s.deleteModal,item_name:s.itemNameforDelete,onClose_modal:r.closeDeleteModal,onDelete_item:r.deleteCategorie},null,8,["isDelete","item_name","onClose_modal","onDelete_item"]),h(L,{isOpen:s.sortingModal,onClose_modal:r.closeSortModal},null,8,["isOpen","onClose_modal"])]),_:1})]),_:1})}const Et=P(Ze,[["render",Ct]]);export{Et as default};
