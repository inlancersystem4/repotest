import{L as k,D as v}from"./Default-BakE7Kt_.js";import{_ as A,b as N,f as C,r as h,o as r,d as I,w as g,a as e,y as S,G as F,c as d,j as u,n as E,i as y,E as O,g as p,F as f,e as b,t as x,B,C as V}from"./index-CObJ0xdd.js";import{C as j}from"./CommonModalLayout-BJWFpzOf.js";import{f as w}from"./list-fetch-Bs_JyIgH.js";import{i as W}from"./item-delete-BEr_XWGk.js";import"./transition-DmPYughZ.js";import"./dialog-Bwww8Fqq.js";import"./admin-logo-DCOArUCp.js";const z="https://stagingapi.fandfrestaurants.com/admin",T={components:{CommonModalLayout:j},props:{isOpen:Boolean,area:Object},data(){return{alertStore:N(),btnLoading:!1,formSubmitted:!1,areaName:"",areaId:"",formName:"Add Area"}},created(){this.updateAreaData()},watch:{isOpen(){this.area.area_id?this.formName="Edit Area - "+this.area.area_name:this.formName="Add Area"},area(a){a?this.updateAreaData():this.clearFields()}},methods:{closeModal(){this.$emit("close_modal",1)&&(this.areaId="",this.formName="Add a Area"),this.areaId="",this.$emit("close_modal"),this.clearFields()},clearFields(){this.areaName="",this.areaId="",this.formSubmitted=!1},updateAreaData(){this.area?(this.areaName=this.area.area_name,this.areaId=this.area.area_id):this.formName="Add Supplier"},async updateSupplier(){if(this.formSubmitted=!0,this.btnLoading=!0,!this.areaName){this.btnLoading=!1;return}var a=new FormData;this.areaId?a.append("area_id",this.areaId):a.append("area_id",""),a.append("area_name",this.areaName);try{const t=await C.post(`${z}/area-add`,a);t.success==1?(this.areaId="",this.$emit("close_modal",1),this.clearFields(),this.btnLoading=!1):(this.btnLoading=!1,this.alertStore.error(t.message))}catch(t){this.alertStore.error(t)}}}},U={class:"space-y-3 w-full"},q={class:"input--group"},G={key:0,class:"error--message !text-left flex-1"},H=["disabled"],J={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},K=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Q=[K,P];function R(a,t,l,M,s,o){const _=h("CommonModalLayout");return r(),I(_,{isOpen:l.isOpen,modal_title:s.formName,onClose_modal:o.closeModal,manualClass:"max-w-xl"},{default:g(()=>[e("form",{class:"space-y-10 flex w-full flex-col items-center",onSubmit:t[1]||(t[1]=O((...n)=>o.updateSupplier&&o.updateSupplier(...n),["prevent"]))},[e("div",U,[e("div",q,[S(e("input",{type:"text",id:"aName","onUpdate:modelValue":t[0]||(t[0]=n=>s.areaName=n),placeholder:"Name of area"},null,512),[[F,s.areaName,void 0,{trim:!0}]])]),s.formSubmitted&&!s.areaName?(r(),d("p",G," Area Name is required ")):u("",!0)]),e("button",{class:E(["modal--form_btn",{"btn--loader":s.btnLoading}]),type:"submit",disabled:s.btnLoading},[s.btnLoading?(r(),d("svg",J,Q)):u("",!0),y(" Save ")],10,H)],32)]),_:1},8,["isOpen","modal_title","onClose_modal"])}const X=A(T,[["render",R]]),Y={components:{LayoutWrraper:k,AreaForm:X,DeleteModal:v},data(){return{areaModal:!1,skeletonEffect:!0,aeraList:[],areaData:"",areaId:"",itemNameforDelete:"",deleteModal:!1}},created(){this.fetchAreaList()},methods:{toggleAreaModal(){this.areaModal=!this.areaModal},closeAreaModal(a){this.areaModal=!1,this.areaData="",a&&this.fetchAreaList()},deleteItem(a,t){a&&(this.deleteModal=!0,this.areaId=a,this.itemNameforDelete=t)},closeDeleteModal(){this.deleteModal=!1,this.areaId=""},async fetchAreaList(){this.skeletonEffect=!0;const a=await w("area-list");a&&a.data.length!==0?(this.aeraList=a.data.area_list,this.skeletonEffect=!1):(this.aeraList=[],this.skeletonEffect=!1)},async updateArea(a){var t=new FormData;t.append("area_id",a);try{const l=await w("area-detail",t);l.success==1&&(this.areaData=l.data,this.areaModal=!0)}catch(l){this.alertStore.error(l)}},async deleteArea(){if(this.areaId){var a=new FormData;a.append("area_id",this.areaId),await W("area-remove",a)?(this.fetchAreaList(),this.areaId="",this.closeDeleteModal()):this.closeDeleteModal()}}}},c=a=>(B("data-v-e3d72a9a"),a=a(),V(),a),Z={class:"custom-container"},$={class:"flex items-end justify-end w-full"},ee={class:"w-full overflow-x-auto"},ae={class:"table mt-6 max-w-[720px] mx-auto w-full"},te=c(()=>e("tr",null,[e("th",{class:"no"},"No"),e("th",{class:"area"},"Area"),e("th",{class:"action"},"Action")],-1)),se=c(()=>e("td",{class:"no"},[e("div",{class:"effect"},[e("span",{class:"bg-base-color h-[25px] rounded-md w-[25px] mx-auto block"})])],-1)),oe=c(()=>e("td",{class:"area"},[e("div",{class:"effect"},[e("span",{class:"bg-base-color h-[25px] rounded-md mx-auto w-[180px] block"})])],-1)),re=c(()=>e("td",{class:"action"},[e("div",{class:"effect flex items-center justify-center flex-wrap gap-1.5"},[e("span",{class:"bg-base-color h-[25px] rounded-md w-[42px] block"}),e("span",{class:"bg-base-color h-[25px] rounded-md w-[42px] block"})])],-1)),le=[se,oe,re],ie={class:"no"},de={class:"area !normal-case"},ne={class:"action"},ce=["onClick"],me=["onClick"],he={key:2},_e=c(()=>e("td",{class:"!text-center",colspan:"3"},"No data Found!!",-1)),pe=[_e];function fe(a,t,l,M,s,o){const _=h("LayoutWrraper"),n=h("AreaForm"),D=h("DeleteModal");return r(),d(f,null,[p(_,null,{default:g(()=>[e("div",Z,[e("div",$,[e("button",{class:"btn--regular",onClick:t[0]||(t[0]=(...i)=>o.toggleAreaModal&&o.toggleAreaModal(...i))},"Add Area")]),e("div",ee,[e("table",ae,[te,s.skeletonEffect?(r(),d(f,{key:0},b(6,(i,m)=>e("tr",{class:"animate-pulse",key:m},le)),64)):(r(!0),d(f,{key:1},b(s.aeraList,(i,m)=>(r(),d("tr",{key:m},[e("td",ie,x(m+1),1),e("td",de,x(i.area_name),1),e("td",ne,[e("button",{onClick:L=>o.updateArea(i.area_id)},"Edit",8,ce),y(", "),e("button",{onClick:L=>o.deleteItem(i.area_id,i.area_name)},"delete",8,me)])]))),128)),!s.aeraList||s.aeraList.length===0?(r(),d("tr",he,pe)):u("",!0)])])])]),_:1}),p(n,{isOpen:s.areaModal,onClose_modal:o.closeAreaModal,area:s.areaData},null,8,["isOpen","onClose_modal","area"]),p(D,{isDelete:s.deleteModal,item_name:s.itemNameforDelete,onClose_modal:o.closeDeleteModal,onDelete_item:o.deleteArea},null,8,["isDelete","item_name","onClose_modal","onDelete_item"])],64)}const De=A(Y,[["render",fe],["__scopeId","data-v-e3d72a9a"]]);export{De as default};
