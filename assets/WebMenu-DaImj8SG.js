import{h as N,_ as S,u as x,r as p,o as n,c,F as L,e as $,d as b,w as y,i as C,t as g,n as F,a as r,j as f,g as I,k as O,l as k,m as W,p as P,q as B,s as R,v as U,b as E,f as M}from"./index-CObJ0xdd.js";import{W as V}from"./WebLayout-DeIpzfHp.js";import{S as j,h as z}from"./transition-DmPYughZ.js";import{W as A,G as H}from"./dialog-Bwww8Fqq.js";import"./menu-logo-BARb-1YE.js";const T=N("cart",{state:()=>({items:[]}),actions:{addItem(e){this.items.push(e)}}}),G={props:{list:Array,activeMenu:Number},created(){this.updateRouteParams()},data(){return{languageStore:x(),menuSlug:"",menusId:"",categorySlug:"",container:""}},computed:{locale(){return x().selectedLanguage}},mounted(){this.container=this.$refs.menuContainer},methods:{async updateRouteParams(){this.menuSlug=this.$route.params.menus_slug,this.menusId=this.$route.params.menus_slug,this.categorySlug=this.$route.params.catogery_slug},async updateList(e){await this.$emit("update_list",e,this.container)},menuLinkClass(e){return{active:e.category_slug==this.categorySlug}}},watch:{$route:"updateRouteParams"}},q={class:"bottom--menu",ref:"menuContainer"};function J(e,t,s,a,o,i){const u=p("RouterLink");return n(),c("ul",q,[(n(!0),c(L,null,$(s.list,(l,_)=>(n(),c("li",{key:_},[l.category_slug?(n(),b(u,{key:0,onClick:m=>i.updateList(l.category_id),"data-category-id":l.category_id,to:`/${this.menuSlug}/${l.category_slug}`,class:F(["menu--link",i.menuLinkClass(l)])},{default:y(()=>[C(g(i.locale==="ar"?l.arabic_name:l.english_name),1)]),_:2},1032,["onClick","data-category-id","to","class"])):(n(),b(u,{key:1,onClick:m=>i.updateList(l.category_id),"data-category-id":l.category_id,to:`/${this.menuSlug}/${l.category_id}`,class:F(["menu--link",i.menuLinkClass(l)])},{default:y(()=>[C(g(i.locale==="ar"?l.arabic_name:l.english_name),1)]),_:2},1032,["onClick","data-category-id","to","class"]))]))),128))],512)}const K=S(G,[["render",J]]),Q="/img/cartbasket.png",X={data(){return{cartStore:T(),languageStore:x(),show:!1,cartItems:[]}},created(){this.getCartItems(),document.body.addEventListener("click",this.handleClickOutside)},computed:{locale(){return x().selectedLanguage}},unmounted(){document.body.removeEventListener("click",this.handleClickOutside)},methods:{getCartItems(){this.cartItems=this.cartStore.items},handleClickOutside(e){this.$el.contains(e.target)||(this.show=!1)},removeItemToCart(e,t){e.stopPropagation();const s=T(),a=s.items.findIndex(o=>o.item_id===t.item_id);a!==-1&&s.items.splice(a,1)}}},Y={class:"relative"},Z=r("img",{src:Q,alt:"cart basket",class:"w-10 h-auto"},null,-1),ee={key:0,class:"bg-base-color size-6 text-xs absolute -right-1 font-helveticav -bottom-2.5 flex items-center justify-center rounded-full text-white"},te={key:0,class:"cart--box"},se={key:0,class:"cart--list"},oe=["src","alt"],ae={class:"space-y-1.5"},ie={key:0,class:"menu--item-name"},ne={key:1,class:"menu--item-name"},le={key:0,class:"menu--item-description"},re={key:1,class:"menu--item-description"},ce={class:"menu--item-calories"},ue=["onClick"],de=r("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M18.75 5.25L5.25 18.75",stroke:"#FFFFFF","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),r("path",{d:"M18.75 18.75L5.25 5.25",stroke:"#FFFFFF","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ge=[de],me={key:1,class:"empty--box"},he=r("div",{class:"text-center space-y-6"},[r("button",null,"Empty"),r("p",{class:"description"},[C(" Double tap on menu item"),r("br"),C(" to add to your basket ")])],-1),_e=[he];function pe(e,t,s,a,o,i){return n(),c("div",Y,[r("button",{class:"relative",onClick:t[0]||(t[0]=u=>o.show=!o.show)},[Z,o.cartItems.length>0?(n(),c("span",ee,g(o.cartItems.length),1)):f("",!0)]),o.show?(n(),c("div",te,[o.cartItems.length>0?(n(),c("ul",se,[(n(!0),c(L,null,$(o.cartItems,(u,l)=>(n(),c("li",{class:"menu--box",key:l},[r("img",{src:u.item_image,alt:u.english_name,loading:"lazy"},null,8,oe),r("div",ae,[i.locale==="ar"?(n(),c("h2",ie,g(u.arebic_name),1)):(n(),c("h2",ne,g(u.english_name),1))]),i.locale==="ar"?(n(),c("p",le,g(u.arebic_description),1)):(n(),c("p",re,g(u.english_description),1)),r("p",ce,"Calories "+g(u.calerois),1),r("button",{class:"remove-item--btn",onClick:_=>i.removeItemToCart(_,u)},ge,8,ue)]))),128))])):(n(),c("div",me,_e))])):f("",!0)])}const fe=S(X,[["render",pe]]),ye="/img/doubletap.png",ve={components:{TransitionRoot:j,TransitionChild:z,Dialog:A,DialogPanel:H},props:{isOpen:Boolean},methods:{closeModal(){this.$emit("close_modal")}}},be={class:"fixed inset-0 overflow-y-auto"},Ie={class:"flex min-h-full items-center justify-center p-4 text-center"},xe=r("img",{src:ye,alt:"fingle double tap icon",class:"w-[110px] mx-auto mb-4 h-auto"},null,-1),Ce=r("p",{class:"text-center text-sm uppercase text-base-color font-helveticav font-light tracking-wider"},[C(" Double tap on menu item"),r("br"),C(" to add to your basket ")],-1);function ke(e,t,s,a,o,i){const u=p("DialogPanel"),l=p("TransitionChild"),_=p("Dialog"),m=p("TransitionRoot");return n(),b(m,{appear:"",show:s.isOpen,as:"template"},{default:y(()=>[I(_,{as:"div",onClose:i.closeModal,class:"relative z-10"},{default:y(()=>[r("div",be,[r("div",Ie,[I(l,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:y(()=>[I(u,{as:"div",class:"w-full max-w-[90%] sm:max-w-lg transform overflow-hidden rounded-md bg-white py-24 px-4 text-left align-middle border border-solid border-base-color border-opacity-50 transition-all",onClick:i.closeModal},{default:y(()=>[xe,Ce]),_:1},8,["onClick"])]),_:1})])])]),_:1},8,["onClose"])]),_:1},8,["show"])}const we=S(ve,[["render",ke]]),Le=e=>e?"IN":"OUT",$e=(e,t)=>{if(e.top<t.top)return"UP";if(e.left>t.left)return"RIGHT";if(e.top>t.top)return"DOWN";if(e.left<t.left)return"LEFT"},Se=e=>t=>{const s=k();return new window.IntersectionObserver(([a])=>{if(typeof a>"u"){console.error("[vue-waypoint]","observed element is undefined");return}s.value!=null||(s.value=a.boundingClientRect),t({el:a.target,going:Le(a.isIntersecting),direction:$e(a.boundingClientRect,s.value)}),s.value=a.boundingClientRect},e)},Me=O({name:"Waypoint",props:{active:{type:Boolean,default:()=>!0},options:{type:Object,default:()=>({})},tag:{type:String,default:()=>"div"},disableCssHelpers:{type:Boolean,default:()=>!1}},setup(e,t){const s=k(!1),a=k(null),o=W(()=>s.value&&e.active&&a.value!==null),i=k(),u=m=>i.value=m,l=k();P(o,()=>{var m;if(a.value!==null)return o.value&&l.value?l.value.observe(a.value):(m=l.value)==null?void 0:m.unobserve(a.value)}),P(i,()=>{typeof i.value>"u"||t.emit("change",i.value)}),B(()=>{s.value=!0,l.value=Se(e.options)(u)}),R(()=>s.value=!1);const _=W(()=>{var m;const{going:v,direction:d}=(m=i.value)!=null?m:{},h=v&&`going-${v.toLowerCase()}`,w=d&&`direction-${d.toLowerCase()}`;return["waypoint",h,w]});return()=>{var m,v,d;const h=e.disableCssHelpers?{ref:a}:{ref:a,class:_.value};return U(e.tag,h,(d=(v=t.slots).default)==null?void 0:d.call(v,(m=i.value)!=null?m:{}))}}}),De="/img/addtocart.png",D="https://stagingapi.fandfrestaurants.com/api",Te={components:{WebLayout:V,BottomMenu:K,CartContainer:fe,Modal:we,Waypoint:Me},data(){return{alertStore:E(),languageStore:x(),list:[],category_list:[],itemList:[],categorySlug:"",pageNo:"all",categoryData:"",inProcess:"",currentItemIdFotList:"",firstSuggestionmodal:!0,allList:[],menuData:"",menuSlug:"",addedToCartModal:!1}},created(){this.initializeData(),this.fatchMenuList()},computed:{locale(){return x().selectedLanguage}},methods:{async initializeData(){if(this.$route.params.menus_slug&&(this.menuSlug=this.$route.params.menus_slug,this.categorySlug=this.$route.params.catogery_slug,await this.fatchCategoryList(),await this.callAllData(),this.categorySlug)){const e=document.getElementById(this.categorySlug);e&&(await this.isElementInViewport(e)||e.scrollIntoView({behavior:"smooth",block:"start"}))}},async fatchMenuList(){var e=new FormData;e.append("type","front");try{const t=await M.post(`${D}/menu-list`,e);t.data&&t.data.length!==0?(this.menulist=t.data,this.menus_slug&&(this.menuData=this.menulist.find(s=>s.menu_slug==this.menus_slug))):this.menulist=""}catch(t){this.alertStore.error(t)}},addItemToCart(e){const t=T();t.items.some(a=>a.item_id==e.item_id)?this.$notify({group:"error",title:"Sorry",text:`${e.english_name} is already in the cart`},1500):(t.addItem(e),this.addedToCartModal=!0,setTimeout(()=>{this.addedToCartModal=!1},1e3))},async fatchCategoryList(){var e=new FormData;e.append("type","front"),this.menuSlug?e.append("menu_slug",this.menuSlug):e.append("menu",this.menusId);try{const s=await M.post(`${D}/category-list`,e);if(s.data&&s.data.length!==0){this.list=s.data;var t=s.data;for(let a=0;a<t.length;a++)t[a].items=[],t[a].itemProcessing=1;this.category_list=t,this.$route.params.catogery_slug&&(this.categorySlug=this.$route.params.catogery_slug),(!this.$route.params.catogery||!this.$route.params.catogeryId)&&(this.selectFirstItem(),this.categorySlug=this.list[0].category_slug)}else this.list=""}catch(s){this.alertStore.error(s)}},async callAllData(){const e=this.list.map(t=>t);for(const t of e)await this.fetchItemList(t)},async fetchItemList(e){var t=new FormData;t.append("type","front"),e.category_slug?t.append("category_slug",e.category_slug):t.append("category",e.category_id),t.append("page_no",this.pageNo);try{const s=await M.post(`${D}/item-list`,t),a=this.category_list.findIndex(o=>o.category_slug===e.category_slug);if(this.category_list[a].itemProcessing=0,s.data&&s.data.length!==0&&(this.category_list[a].items=s.data,this.allList=this.category_list.filter(o=>o.category_slug==this.categorySlug),this.allList[0].items.length<3)){const o={el:{ariaLevel:"true"},direction:"UP",going:"IN"};this.onChange(o)}}catch(s){this.alertStore.error(s)}},async updateMenuList(e,t){if(this.categoryId=e,!this.allList.some(o=>o.category_slug===this.categorySlug)){const o=Object.values(this.category_list),i=o.findIndex(u=>u.category_slug===this.categorySlug);if(i!==-1){const u=o.slice(0,i+1);this.allList=this.allList.filter(l=>!u.find(_=>_.category_id===l.category_id)),this.allList.push(...u)}}await this.$nextTick();const a=document.getElementById(e);a&&(this.isElementInViewport(a)||(a.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{this.$nextTick(()=>{const i=t.querySelector(`[data-category-id="${this.categoryId}"]`);if(i){const u=i.offsetLeft-(t.offsetWidth-i.offsetWidth)/2;t.scrollTo({left:u,behavior:"smooth"})}})},1e3)))},isElementInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},selectFirstItem(){this.$router.push({name:"webMenu",params:{menus_slug:this.menuSlug,catogery_slug:this.list[0].category_slug}})},closeSuggestionmodal(){this.firstSuggestionmodal=!1},getId(e){if(e.going==="IN"&&e.direction==="UP"){const t=this.category_list.find(s=>s.category_id==e.el.id);this.$router.push({name:"webMenu",params:{menus_slug:this.menuSlug,catogery_slug:t.category_slug}})}else if(e.going==="IN"&&e.direction==="DOWN"){const t=this.category_list.find(s=>s.category_id==e.el.id);this.$router.push({name:"webMenu",params:{menus_slug:this.menuSlug,catogery_slug:t.category_slug}})}else if(e.going==="OUT"&&e.direction==="DOWN"){const t=this.category_list.findIndex(a=>a.category_id==e.el.id),s=this.category_list[t-1];this.$router.push({name:"webMenu",params:{menus_slug:this.menuSlug,catogery_slug:s.category_slug}})}else if(e.going==="OUT"&&e.direction==="UP"){const t=this.category_list.findIndex(a=>a.category_id==e.el.id),s=this.category_list[t+1];this.$router.push({name:"webMenu",params:{menus_slug:this.menuSlug,catogery_slug:s.category_slug}})}},async onChange(e){if(e.el.ariaLevel==="true"&&e.going==="IN"&&e.direction==="UP"){const t=this.category_list;let s;this.currentItemIdFotList?s=t.findIndex(o=>o.category_id==this.currentItemIdFotList):s=t.findIndex(o=>o.category_id==this.categorySlug);const a=t[s+1];if(a){this.currentItemIdFotList=a.category_id;let o=a;if(o){if(o.items.length<3){const l={el:{ariaLevel:"true"},direction:"UP",going:"IN"};this.allList.push(o),this.onChange(l)}this.allList.some(l=>l.category_id==o.category_id)||this.allList.push(o)}}}}},beforeRouteUpdate(e,t,s){s()}},Fe={class:"mt-6 flex justify-between items-end w-full gap-1 sm:px-4 px-3"},We={key:0,class:"space-y-0.5"},Pe={class:"menu--page-title"},Ne={class:"menu--page-sub_title"},Oe={key:1,class:"space-y-0.5"},Be={class:"menu--page-title"},Re={class:"menu--page-sub_title"},Ue=["src","alt"],Ee={key:1,class:"grid grid-cols-2 gap-2 px-4 mt-6 pb-20"},Ve=["src","alt"],je={class:"space-y-1.5"},ze={key:0,class:"menu--item-name"},Ae={key:1,class:"menu--item-name"},He={class:"menu--item-price"},Ge={key:0,class:"menu--item-description"},qe={key:1,class:"menu--item-description"},Je={class:"menu--item-calories"},Ke={key:2,class:"grid px-4 mt-0 pb-20 text-center"},Qe={key:0},Xe={key:1},Ye={key:0,class:"grid px-4 mt-6 pb-20 text-center"},Ze=r("div",{class:"fixed inset-0 flex items-center justify-center w-full h-full z-[1000]"},[r("div",{class:"w-full mx-auto"},[r("img",{src:De,alt:"item added to cart",class:"h-auto sm:w-24 mx-auto w-20"})])],-1),et=[Ze];function tt(e,t,s,a,o,i){const u=p("CartContainer"),l=p("Waypoint"),_=p("BottomMenu"),m=p("Modal"),v=p("WebLayout");return n(),b(v,null,{default:y(()=>[r("div",Fe,[i.locale==="ar"?(n(),c("div",We,[r("h5",Pe,g(o.menuData.arebic_name),1),r("p",Ne,g(o.menuData.arabic_text_menu),1)])):(n(),c("div",Oe,[r("h5",Be,g(o.menuData.english_name),1),r("p",Re,g(o.menuData.menu_text),1)])),I(u)]),(n(!0),c(L,null,$(o.category_list,d=>(n(),b(l,{tag:"div",ref_for:!0,ref:d.category_id,ariaLevel:d.category_id,id:d.category_id,class:"w-full overflow-hidden mt-6",key:d.category_id,onChange:i.getId},{default:y(()=>[d?(n(),c("img",{key:0,src:d.category_image,alt:d.english_name,class:"mx-auto max-w-full w-[260px] object-contain h-auto"},null,8,Ue)):f("",!0),d.items?(n(),c("ul",Ee,[(n(!0),c(L,null,$(d.items,(h,w)=>(n(),b(l,{tag:"li",class:"menu--box",key:w,onDblclick:st=>i.addItemToCart(h),ariaLevel:w===d.items.length-1,onChange:i.onChange},{default:y(()=>[r("img",{src:h.item_image,alt:h.english_name,loading:"lazy"},null,8,Ve),r("div",je,[i.locale==="ar"?(n(),c("h2",ze,g(h.arebic_name),1)):(n(),c("h2",Ae,g(h.english_name),1)),r("h6",He,"SAR "+g(h.selling_price),1)]),i.locale==="ar"?(n(),c("p",Ge,g(h.arebic_description),1)):(n(),c("p",qe,g(h.english_description),1)),r("p",Je,"Calories "+g(h.calerois),1)]),_:2},1032,["onDblclick","ariaLevel","onChange"]))),128))])):f("",!0),d.items.length===0?(n(),c("ul",Ke,[d.itemProcessing==1?(n(),c("p",Qe,g(d.english_name)+" items are on the way .... ",1)):f("",!0),d.itemProcessing==0?(n(),c("p",Xe," Currently no items available for "+g(d.english_name),1)):f("",!0)])):f("",!0)]),_:2},1032,["ariaLevel","id","onChange"]))),128)),o.inProcess?(n(),c("ul",Ye," Menu Item in process.. ")):f("",!0),o.addedToCartModal?(n(),c("div",{key:1,onClick:t[0]||(t[0]=d=>this.addedToCartModal=!1)},et)):f("",!0),I(_,{list:o.list,onUpdate_list:i.updateMenuList,activeMenu:o.currentItemIdFotList},null,8,["list","onUpdate_list","activeMenu"]),I(m,{isOpen:o.firstSuggestionmodal,onClose_modal:i.closeSuggestionmodal},null,8,["isOpen","onClose_modal"])]),_:1})}const rt=S(Te,[["render",tt]]);export{rt as default};
